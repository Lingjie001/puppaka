name: Auto Deploy to Hostinger

on:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    
    - name: Deploy to Hostinger
      uses: appleboy/ssh-action@master
      with:
        host: 195.35.33.249
        username: u734351237
        password: ${{ secrets.HOSTINGER_PASSWORD }}
        script: |
          cd ~/domains/puppaka.com/public_html
          git pull origin main
          pkill -f "node app.js" || true
          sleep 2
          nohup /opt/alt/alt-nodejs20/root/usr/bin/node app.js > app.log 2>&1 &
          echo "âœ… Deployed at $(date)"
